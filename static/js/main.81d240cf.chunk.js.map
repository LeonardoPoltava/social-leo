{"version":3,"sources":["serviceWorker.js","components/Sidebar/Sidebar.jsx","redux/sidebar-reducer.js","redux/app-reducer.js","redux/redux-store.js","App.js","index.js","redux/auth-reducer.js","components/common/preloader/Preloader.jsx","redux/profile-reducer.js","api/api.js","redux/dialog-reducer.js","utils/object-helpers.js","redux/users-reducer.js"],"names":["Boolean","window","location","hostname","match","Sidebar","className","to","initialState","sidebarReducer","state","initialized","appReducer","action","type","reducers","combineReducers","profilePage","profileReducer","messagesPage","dialogReducer","sidebar","usersPage","usersReducer","auth","authReducer","form","formReducer","app","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","__store__","DialogsContainer","lazy","ProfileContainer","UsersContainer","HeaderContainer","LoginPage","App","this","props","initializeApp","fallback","Preloader","exact","path","component","Component","AppContainer","withRouter","connect","dispatch","promise","getAuthUserData","Promise","all","then","SamuraiJSApp","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","SET_USER_DATA","userId","email","login","isAuth","setAuthUserData","payload","a","authAPI","response","data","resultCode","id","getLoginUserData","password","rememberMe","message","messages","length","stopSubmit","_error","getLogoutUserData","logout","alt","src","posts","profile","status","postsCounter","addPostCreator","newPostText","getUserProfile","profileAPI","setStatus","getStatus","updateStatus","newPost","likesCount","filter","p","postId","instance","axios","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","get","followAPI","unfollow","delete","follow","post","put","messagesData","dialogsData","name","avatar","addMessageCreator","newMessageText","body","updateObjectsInArray","items","itemId","objPropName","newObjProps","map","u","users","totalUsersCount","isFetching","followingInProgress","followSuccess","unfollowSuccess","setCurrentPage","setFetching","toggleFollowingProgress","requestUsers","page","count","totalCount","followUnfollowFlow","apiMethod","actionCreator","bind","followed"],"mappings":"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","file":"static/js/main.81d240cf.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Post is cached for offline use.\" message.\n              console.log('Post is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport \"./Sidebar.css\"\nimport {NavLink} from \"react-router-dom\";\n\nconst Sidebar = () => {\n    return (\n        <nav className=\"nav\">\n            <ul className=\"nav-list\">\n                <li><NavLink to=\"/profile/\">Profile</NavLink></li>\n                <li><NavLink to=\"/dialogs/\">Messages</NavLink></li>\n                <li><NavLink to=\"/news/\">News</NavLink></li>\n                <li><NavLink to=\"/music/\">Music</NavLink></li>\n                <li><NavLink to=\"/settings/\">Settings</NavLink></li>\n                <li><NavLink to=\"/users/\">Find users</NavLink></li>\n            </ul>\n        </nav>\n    );\n}\nexport default  Sidebar;","let initialState = {};\n\nconst sidebarReducer = (state = initialState, action) => {\n\n    return state;\n};\nexport default sidebarReducer;","import {getAuthUserData} from \"./auth-reducer\";\n\nconst INITIALIZED_SUCCESS = 'INITIALIZED_SUCCESS';\n\nlet initialState = {\n    initialized: false\n};\n\nconst appReducer = (state = initialState, action) => {\n    switch(action.type){\n        case INITIALIZED_SUCCESS: {\n            return {\n                ...state,\n                initialized: true\n            }\n        }\n        default: {\n            return state;\n        }\n    }\n};\nexport const initializedSuccess = () => ({type: INITIALIZED_SUCCESS });\n\nexport const initializeApp = () => (dispatch) => {\n    let promise = dispatch(getAuthUserData());\n\n    Promise.all([promise]).then(() => {\n        dispatch(initializedSuccess());\n    });\n}\nexport default appReducer;","import {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\nimport profileReducer from \"./profile-reducer\";\nimport dialogReducer from \"./dialog-reducer\";\nimport sidebarReducer from \"./sidebar-reducer\";\nimport usersReducer from \"./users-reducer\";\nimport authReducer from \"./auth-reducer\";\nimport thunkMiddleware from \"redux-thunk\";\nimport { reducer as formReducer } from 'redux-form'\nimport appReducer from \"./app-reducer\";\n\nlet reducers = combineReducers({\n    profilePage: profileReducer,\n    messagesPage: dialogReducer,\n    sidebar: sidebarReducer,\n    usersPage: usersReducer,\n    auth: authReducer,\n    form: formReducer,\n    app: appReducer\n});\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(reducers,  composeEnhancers(applyMiddleware(thunkMiddleware)));\nwindow.__store__ = store;\n\nexport default store;","import React, {Component, Suspense, lazy} from 'react';\nimport './App.css';\nimport Sidebar from \"./components/Sidebar/Sidebar.jsx\";\nimport {HashRouter, Route, Switch, withRouter} from 'react-router-dom';\nimport {connect, Provider} from \"react-redux\";\nimport {compose} from \"redux\";\nimport store from \"./redux/redux-store\";\nimport {initializeApp} from \"./redux/app-reducer\";\nimport Preloader from \"./components/common/preloader/Preloader\";\n\nconst DialogsContainer = lazy(() => import('././components/Dialogs/DialogsContainer'));\nconst ProfileContainer = lazy(() => import('./components/Profile/ProfileContainer'));\nconst UsersContainer = lazy(() => import('./components/Users/UsersContainer'));\nconst HeaderContainer = lazy(() => import('./components/Header/HeaderContainer'));\nconst LoginPage = lazy(() => import('./components/Login/LoginContainer'));\n\nclass App extends Component {\n    componentDidMount() {\n        this.props.initializeApp();\n    }\n    render() {\n        if (!this.props.initialized) {\n            return <Preloader/>\n        }\n        return (\n            <div className=\"app-wrapper\">\n                <Suspense fallback={<Preloader/>}>\n                    <HeaderContainer/>\n                </Suspense>\n                <Sidebar/>\n                <div className=\"content\">\n                    <Suspense fallback={<Preloader/>}>\n                        <Switch>\n                            <Route exact path=\"/profile/:userId?\" component={ProfileContainer}/>\n                            <Route path=\"/dialogs/\" component={DialogsContainer}/>\n                            <Route path=\"/users/\" component={UsersContainer}/>\n                            <Route path=\"/login/\" component={LoginPage}/>\n                        </Switch>\n                    </Suspense>\n                </div>\n            </div>\n        );\n    }\n}\nconst mapStateToProps = (state) => ({\n    initialized: state.app.initialized\n});\n\nlet AppContainer = compose(\n    withRouter,\n    connect(mapStateToProps, {initializeApp}))(App);\n\nconst SamuraiJSApp = (props) => {\n    return <HashRouter >\n        <Provider store={store}>\n            <AppContainer />\n        </Provider>\n    </HashRouter>\n};\n\nexport default SamuraiJSApp;","import * as serviceWorker from './serviceWorker';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport SamuraiJSApp from './App';\n\nReactDOM.render(<SamuraiJSApp/>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import {authAPI} from \"../api/api\";\nimport {stopSubmit} from \"redux-form\";\n\nconst SET_USER_DATA = 'social-network/auth/SET_USER_DATA';\n\nlet initialState = {\n    userId: null,\n    email: null,\n    login: null,\n    isAuth: false\n};\n\nconst authReducer = (state = initialState, action) => {\n    switch(action.type){\n        case SET_USER_DATA: {\n            return {\n                ...state,\n                ...action.payload\n            }\n        }\n        default: {\n            return state;\n        }\n    }\n};\n\nexport const setAuthUserData = (userId, email, login, isAuth) => ({type: SET_USER_DATA, payload: {userId, email, login, isAuth}});\nexport const getAuthUserData = () => async (dispatch) => {\n    let response = await authAPI.auth();\n\n    if(response.data.resultCode === 0) {\n        let {id, email, login} = response.data.data;\n        dispatch(setAuthUserData(id, email, login, true));\n    }\n}\n\nexport const getLoginUserData = (login, password, rememberMe) => async (dispatch) => {\n    let response = await authAPI.login(login, password, rememberMe);\n\n    if(response.data.resultCode === 0) {\n        dispatch(getAuthUserData());\n    }\n    else {\n        let message = response.data.messages.length > 0 ? response.data.messages : \"Error\";\n        dispatch(stopSubmit(\"login\", {_error: message}));\n    }\n};\nexport const getLogoutUserData = () => async (dispatch) => {\n    let response = await authAPI.logout();\n\n    if(response.data.resultCode === 0) {\n        dispatch(setAuthUserData(null, null, null, false));\n    }\n}\n\nexport default authReducer;","import React from 'react';\nimport \"./Preloader.css\";\n\nlet Preloader = (props) => {\n    return <>\n        <div className=\"shadow\"></div>\n        <img alt=\"\" className=\"loading\" src=\"https://icon-library.net/images/ajax-loading-icon/ajax-loading-icon-11.jpg\" />\n    </>\n}\nexport default Preloader;","import {profileAPI} from \"../api/api\";\n\nconst ADD_POST = 'ADD-POST';\nconst DELETE_POST = 'DELETE_POST';\nconst SET_USER_PROFILE = 'SET-USER-PROFILE';\nconst SET_STATUS = 'SET-STATUS';\n\nlet initialState = {\n    posts: [],\n    profile: null,\n    status: \"\",\n    postsCounter: null\n};\n\nconst profileReducer = (state = initialState, action) => {\n    switch(action.type){\n        case ADD_POST: {\n            let newPost = {\n                id: state.postsCounter++,\n                message: action.newPostText,\n                likesCount: 0\n            };\n            return {\n                ...state,\n                posts: [...state.posts, newPost],\n                newPostText: \"\"\n            }\n        }\n        case DELETE_POST: {\n            return {\n                ...state,\n                posts: state.posts.filter(p => p.id !== action.postId)\n            }\n        }\n        case SET_USER_PROFILE: {\n            return {...state, profile: action.profile}\n        }\n        case SET_STATUS: {\n            return {...state, status: action.status}\n        }\n        default: {\n            return state;\n        }\n    }\n};\n\nexport const addPostCreator = (newPostText) => ({type: ADD_POST, newPostText});\nexport const deletePost = (postId) => ({type: DELETE_POST, postId});\n\nexport const setUserProfile = (profile) => ({type: SET_USER_PROFILE, profile});\nexport const getUserProfile = (userId) => async (dispatch) => {\n    let response = await profileAPI.profile(userId);\n    dispatch(setUserProfile(response.data));\n};\n\nexport const setStatus = (status) => ({type: SET_STATUS, status});\nexport const getStatus = (userId) => async (dispatch) => {\n    let response = await profileAPI.getStatus(userId);\n    dispatch(setStatus(response.data));\n};\n\nexport const updateStatus = (status) => async(dispatch) => {\n    let response = await profileAPI.updateStatus(status);\n    if(response.data.resultCode === 0) {\n        dispatch(setStatus(status));\n    }\n};\nexport default profileReducer;","import * as axios from \"axios\";\n\nconst instance = axios.create({\n    withCredentials: true,\n    baseURL: \"https://social-network.samuraijs.com/api/1.0/\",\n    headers: {\n        \"API-KEY\": \"edd374dd-87c3-43d5-9f84-18ff67372711\"\n    }\n});\nexport const usersAPI = {\n    getUsers(currentPage = 1 , pageSize = 10) {\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`)\n            .then(response => {\n                return response.data\n            })\n    }\n};\nexport const followAPI = {\n    unfollow(id) {\n        return instance.delete(`follow/${id}`);\n    },\n    follow(id) {\n        return instance.post(`follow/${id}`);\n    }\n};\nexport const authAPI = {\n    auth() {\n        return instance.get(`auth/me`)\n    },\n    login(email, password, rememberMe = false) {\n        return instance.post(`auth/login`, {email, password, rememberMe});\n    },\n    logout() {\n        return instance.delete(`auth/login`);\n    }\n};\nexport const profileAPI = {\n    profile(id) {\n        return instance.get(`profile/${id}`)\n    },\n    getStatus(id) {\n        return instance.get(`profile/status/${id}`)\n    },\n    updateStatus(status) {\n        return instance.put(`profile/status/`, {status: status})\n    }\n};","const ADD_MESSAGE = 'ADD-MESSAGE';\n\nlet initialState = {\n    messagesData: [],\n    dialogsData: [\n        {id: 1, name: 'Julia', avatar: \"https://scontent.fiev9-1.fna.fbcdn.net/v/t31.0-8/18527165_108062213108020_5142657843914753339_o.jpg?_nc_cat=102&_nc_oc=AQmBFYmlYF-hNp0nj6XaFpdS170Qy3gDU7UyUl20F_trXB-two3-rQNxfM82L5nPNLI&_nc_ht=scontent.fiev9-1.fna&oh=5eb537986c2c1eb0ff98d0eb6c811f74&oe=5E871397\"},\n        {id: 2, name: 'Leo', avatar: \"https://scontent.fiev9-1.fna.fbcdn.net/v/t1.0-9/69204180_913385035661609_6653158427474264064_o.jpg?_nc_cat=104&_nc_oc=AQkf--n1m7G-v5Hl81hdjDnShZ7go1ACiOz13D_1vj75MVg7-E-lOPP8KTzKXzkCeek&_nc_ht=scontent.fiev9-1.fna&oh=37d65e6660e15ee9a07d860f5b2a5e4d&oe=5E4A9750\"},\n        {id: 3, name: 'Fatima', avatar: \"https://instagram.fiev9-1.fna.fbcdn.net/vp/6cc94160aa06908d9dacedd30a76b60a/5E575759/t51.2885-15/sh0.08/e35/s750x750/67780439_2640105096013963_5656727610121398827_n.jpg?_nc_ht=instagram.fiev9-1.fna.fbcdn.net&_nc_cat=107\"},\n        {id: 4, name: 'Ramin', avatar: \"https://instagram.fiev9-1.fna.fbcdn.net/vp/76a0f0e416adc85d8cf9aabfdec29e73/5E58536B/t51.2885-15/sh0.08/e35/p640x640/66107413_511656199584714_6838401202735629629_n.jpg?_nc_ht=instagram.fiev9-1.fna.fbcdn.net&_nc_cat=106\"},\n        {id: 5, name: 'Terry', avatar: \"https://instagram.fiev9-1.fna.fbcdn.net/vp/2fad656281839ed604238c2959d14a97/5E5079AD/t51.2885-15/e35/13381346_689645064507947_137065777_n.jpg?_nc_ht=instagram.fiev9-1.fna.fbcdn.net&_nc_cat=111\"},\n        {id: 6, name: 'Gerrard', avatar: \"https://instagram.fiev9-1.fna.fbcdn.net/vp/3096af97282a8d75ddcf8669e732a976/5E47EACF/t51.2885-15/sh0.08/e35/p750x750/73317997_121199169311357_8433565016245429815_n.jpg?_nc_ht=instagram.fiev9-1.fna.fbcdn.net&_nc_cat=105\"}\n    ]\n};\n\nconst dialogReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case ADD_MESSAGE: {\n            let body = action.newMessageText;\n            return {\n                ...state,\n                messagesData: [...state.messagesData, {id: 5, message: body}]\n            }\n        }\n        default:\n            return state;\n    }\n};\n\nexport const addMessageCreator = (newMessageText) => ({type: ADD_MESSAGE, newMessageText});\n\nexport default dialogReducer;","\nexport const updateObjectsInArray = (items, itemId, objPropName, newObjProps) => {\n    return items.map(u => {\n        if(u[objPropName] === itemId) {\n            return {...u, ...newObjProps}\n        }\n        return u;\n    })\n}","import {followAPI, usersAPI} from \"../api/api\";\nimport {updateObjectsInArray} from \"../utils/object-helpers\";\n\nconst FOLLOW = 'FOLLOW';\nconst UNFOLLOW = 'UNFOLLOW';\nconst SET_USERS = 'SET-USERS';\nconst SET_CURRENT_PAGE = 'SET-CURRENT-PAGE';\nconst SET_TOTAL_COUNT = 'SET-TOTAL-COUNT';\nconst TOGGLE_FETCHING= 'TOGGLE-FETCHING';\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE_IS_FOLLOWING_PROGRESS';\n\nlet initialState = {\n    users: [],\n    pageSize: 10,\n    totalUsersCount: 0,\n    currentPage: 1,\n    isFetching: true,\n    followingInProgress: []\n};\n\nconst usersReducer = (state = initialState, action) => {\n    switch(action.type){\n        case FOLLOW:\n            return {\n                ...state,\n                users: updateObjectsInArray(state.users, action.userId, \"id\", {followed: true} )\n            }\n        case UNFOLLOW:\n            return {\n                ...state,\n                users: updateObjectsInArray(state.users, action.userId, \"id\", {followed: false} )\n            }\n        case SET_USERS: {\n            return {\n                ...state,\n                users: action.users\n            }\n        }\n        case SET_CURRENT_PAGE: {\n            return {\n                ...state,\n                currentPage: action.currentPage\n            }\n        }\n        case SET_TOTAL_COUNT: {\n            return {\n                ...state,\n                totalUsersCount: action.count\n            }\n        }\n        case TOGGLE_FETCHING: {\n            return {\n                ...state,\n                isFetching: action.isFetching\n            }\n        }\n        case TOGGLE_IS_FOLLOWING_PROGRESS: {\n            return {\n                ...state,\n                followingInProgress: action.isFetching\n                    ? [...state.followingInProgress, action.userId]\n                    : state.followingInProgress.filter(id => id !== action.userId)\n            }\n        }\n        default: {\n            return state;\n        }\n    }\n};\n\nexport const followSuccess = (userId) => ({type: FOLLOW, userId})\nexport const unfollowSuccess = (userId) => ({type: UNFOLLOW, userId})\nexport const setUsers = (users) => ({type: SET_USERS, users})\nexport const setTotalUsersCount = (count) => ({type: SET_TOTAL_COUNT, count})\nexport const setCurrentPage = (currentPage) => ({type: SET_CURRENT_PAGE, currentPage})\nexport const setFetching = (isFetching) => ({type: TOGGLE_FETCHING, isFetching})\nexport const toggleFollowingProgress = (isFetching, userId) => ({type: TOGGLE_IS_FOLLOWING_PROGRESS, isFetching, userId})\n\nexport const requestUsers = (page, pageSize) => {\n    return async (dispatch) => {\n        dispatch(setFetching(true));\n        dispatch(setCurrentPage(page));\n\n        let data = await usersAPI.getUsers(page, pageSize);\n        dispatch(setFetching(false));\n        dispatch(setUsers(data.items));\n        dispatch(setTotalUsersCount(data.totalCount));\n    }\n};\n\n// FOLLOW UNFOLLOW\n\nconst followUnfollowFlow = async (dispatch, userId, apiMethod, actionCreator) => {\n    dispatch(toggleFollowingProgress(true, userId));\n    let response = await apiMethod(userId);\n\n    if(response.data.resultCode === 0) {\n        dispatch(actionCreator(userId));\n    }\n    dispatch(toggleFollowingProgress(false, userId));\n};\n\nexport const follow = (userId) => {\n    return async (dispatch) => {\n        followUnfollowFlow(dispatch, userId, followAPI.follow.bind(followAPI), followSuccess);\n    }\n};\n\nexport const unfollow = (userId) => {\n    return async (dispatch) => {\n        followUnfollowFlow(dispatch, userId, followAPI.unfollow.bind(followAPI), unfollowSuccess);\n    }\n};\n\nexport default usersReducer;"],"sourceRoot":""}